<!doctype html>
<html lang="en">
  <head>
    <meta name="color-scheme" content="light dark">
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/images/profile/Perfil.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Marco Cordoba | Desarrollador Web</title>
    <script>
      (() => {
        const STORAGE_KEY = 'portfolio-dark-mode';
        const MEDIA_QUERY = '(prefers-color-scheme: dark)';
        const root = document.documentElement;

        const applyTheme = (isDark) => {
          const preferredScheme = isDark ? 'dark' : 'light';
          root.classList.toggle('dark', isDark);
          root.style.setProperty('color-scheme', preferredScheme);
          root.dataset.theme = preferredScheme;

          const meta = document.querySelector('meta[name="color-scheme"]');
          if (meta) {
            meta.setAttribute('content', isDark ? 'dark light' : 'light dark');
          }
        };

        try {
          const storedValue = window.localStorage.getItem(STORAGE_KEY);
          if (storedValue !== null) {
            applyTheme(JSON.parse(storedValue));
            return;
          }
        } catch (error) {
          console.warn('No se pudo recuperar la preferencia de modo oscuro antes de la carga:', error);
        }

        if (window.matchMedia) {
          applyTheme(window.matchMedia(MEDIA_QUERY).matches);
        } else {
          applyTheme(true);
        }
      })();
    </script>
  </head>
  <body class="bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100 transition-colors duration-300">
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
